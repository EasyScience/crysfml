   
    *************************************************************
    *                                                           *
    *                 CRYSTALLOGRAPHIC CALCULATIONS             *
    *                                                           *
    *                                                           *
    *                (T.R. / CDIFX - UMR6226 Rennes)            *
    *                           Jan. 2012                       *
    *                                                           *
    *            with courtesy of JRC and JGP for CFML          *
    *                                                           *
    *                                                           *
    *              (beta version still under tests)             *
    *               contact: cdifx@univ-rennes1.fr              *
    *                                                           *
    *      Web site : www.cdifx.univ-rennes1.fr/cryscal.htm     *
    *                                                           *
    *************************************************************
   

  Main new features implemented in CRYSCAL:
  (for more details, see the CRYSCAL manual (MAN keyword))

  T. Roisnel / CDIFX Rennes


   . January 12 :
     # CRYSCAL has been compiled with the new CRYSFML library
     # MOVE instruction for SHELXL (output of SG_INFO for acentric
       space groupe  ) is now correct for non conventional settings

   . December 11 :
     # Some minor changes have been performed in the code to be compiled
       with Intel Fortran Compiler
     # HKL arrays are now dimensionned dynamically. Default dimension is
       500000 but can be defined by user in the setting file though the
       "hkl_reflections" keyword in the [ARRAYS DIMENSIONS] section.
     # "LOCK_wave_value" field can be input in the cryscal.ini setting file to
       to define the lock the input wavelength to the value of the closer
       Xray target (Cu, Mo ...). if not present in the setting file, the default
       value for this field is 0.02.
       Examples :
       - input wavelength = 1.53 and LOCK_wave_value = 0.02  : wave_length = 1.5406
       - input wavelength = 1.53 and LOCK_wave_value = 0.005 : wave_length = 1.53

   . November 11 :
     # Minor corrections in the HTML report in the "symmetry transformations
       used to generate equivalent atoms" parts (distances, angles, torsion
       angles and hydrogen bonds)
     # LST_SG keyword :
       - "chiral" and "polar" arguments can se specified to output
         chiral and polar space groups respectively
     # SG_INFO keyword outputs the MOVE instruction for SHELXL
     # in the case of acentric space groups.
     # CRYSCAL has been compiled with last version of CFML (5.00)
      and changes in the space_group routine have been made to be
      to be in agreement with the CFML library.


   . October 11 :
     # LST_SG keyword :
       - "enantio" argument can se specified to output
         enantiomorphic space goups
       - Point group is output

     # MU keyword : explicit keyword to perform absorption coefficient
       calculation. Cell paramaters, wave and cell content has to be
       known. This keyword can be useful after reading of parameters
       from an external file as CIF or INS file.
       ex : READ_CIF UAl2.cif
            WAVE X_cu
            MU

     # DIAG keyword : diagonalization of a 3*3 matrix and ouput Eigen values
                      and Eigen vectors
     # THERM_SHELX keyword : ADP parameters are input in the following
       SHELX order, i.e. 11 22 33 23 13 12


   . July 11 :
     # Up to 5 extra matrices can be provided by the user in the cryscal.ini
       setting file in the [USER TRANSFORMATION MATRICES] section. These
       matrices are defined through the "MAT_n" keyword followed by the 9
       components of the matrix m11 m12 m13 m21 m22 m23 m31 m32 m33 .
       and a comment text.
       New "USER_MAT" keyword has been added to select a particular matrix
       provided by the user in the cryscal.ini setting file.
       The matrix to be selected can be input either by the numor preceded by
       the "# symbol, either the comment text preceded by the "$" symbol
       Examples : USER_MAT #1
                  USER_MAT $2a
     # "include_RES_file" field can be input in the cryscal.ini setting file to
       embed the contain of last .res SHELXL file in the archive_cryscal.cif file
       to avoid PLAT005_ALERT_5G alert in the CHECK CIF procedure. The SHELXL
       .res file name corresponds to the last project ID in WinGX.
     # After a matrix transformation of atomic coordinates, the list of atoms
       is updated with new coordinates.
     # Search_group procedure outputs only space groups those Bravais lattice
       corresponds to the Bravais lattice contained in the import.cif file
     # Include "_symmetry_space_group_name_H-M" string in the import.cif file
       created from .P4P and .HKL file

   . June 11 :
     # CRYSCAL has been compiled with new version of CFML (5.00)

   . May 11 :
     # Bug has been corrected in the structure factor calculation routine
     # Total number of electrons is output after CHEM keyword.
     # The matrix used for the hexagonal to rhomboedral system was corrupted.

   . April 11 :
     # Some changes in the routine to get new space group after matrix
       transformation
     # Some changes in the monoclinic transformation matrix list
     # A non systematic bug in the bonds distribution list (CONN keyword)
       has been corrected

   . Feb. 11 :
     # Stucture factors calculation can be performed for electrons
       diffraction (GEN_HKL and SF_HKL routines). This has to be
       specified by the BEAM keyword and "ELECTRONS" argument
     # Some examples of CFL input files can be downloaded from the
       CRYSCAL web site (www.cdifx.univ-rennes1.fr/cryscal)
     # Some changes in output files :
        . cryscal.log is renamed cryscal_debug.txt
        . cryscal.out is renamed cryscal.log
       LOG argument has been replaced by DEBUG argument
     # New PAT argument for GEN_HKL keyword allows to generate a
       diffraction pattern. PRF file is automatically plotted
       with the WinPLOTR program if installed.
     # I/Imax is now calculated in the GEN_HKL routine when working
       in the 2theta space and neutron or Cu_K_alpha1 X-ray radiation.
       Intensity is calculated as follows:
                        I=mult * Lp * F^2
       where : mult is the multicicity of the reflexion
               Lp the Lorentz-polarization factor, calculated by:
               Lp=(1-K+K*CTHM*cos2(2theta)/(2sin2(theta)cos(theta)
                CTHM=cos2(2theta_monok) [CTHM=0.79]
                K=0.  for neutrons
                K=0.5 for unpolarized X-ray radiation
     # Cosmetic changes in the Fortran codes to allow the compilation
       with the free G95 Fortran compiler.

   . Jan. 11 :
     # CREATE_FST keyword allows to create a .FST file for
       FullProf Studio after reading a CIF file.
     # "create_FST" field can be input in the "[COMMAND LINE ARGUMENTS]" part
       in the setting file (cryscal.ini)

   . Dec. 10 :
     # New extinction rules for FIND_HKL_LIST keyword:
       . hhl with h+l=2n
       . hkk with k+h=2n
       . hkh with h+k=2n
     # Cosmetic changes in archive_cryscal.cif file: in the case
       of samples without H atoms, "_atom_sites_solution_hydrogens" and
       "_refine_ls_hydrogen_tretament" cif field lines are removed


   . Nov. 10 :
     # Connectivity calculations are followed by a bonds distribution list
     # Transformation matrix components can be input as fractional values
        Example : matrix 1/2 1/2 0.   -1/2 1/2 0. 0. 0. 1
     # Cosmetic changes in HTML structural report

   . Oct. 10 :
     # A threshold value can be given as argument to the SEARCH_GROUP keyword

   . Sept. 10 :
     # FIND_HKL_list argument value can be negative and allows to search
       reflections with opposite rule than for positive value.
     # SIR_TO_INS command line argument has been replaced by SOLVE_TO_INS
       and allows now to create INS file for SHELXL from SHELXS ouput file
       as well as SIRxx output file.)
     # CREATE_ACE keyword allows to create a .ACE file for CaRIne
       after reading a CIF file.
     # "create_CEL" field has been added in the "[COMMAND LINE ARGUMENTS]" part
       in the setting file (cryscal.ini)
     # NIGGLI/NIGGLI_CELL keyword has been added and allows to determine
       the Niggli cell from any triclinic cell
     # [CREATE INS] section has been added in the crysal.ini setting file to
       define temperature and thermal parameter threshold to skip atoms
       This avoids to enter these values related to the CREATE_INS keyword

   . June 10 :
     # Bugs in the FIND_HKL_LIST routine has been corrected

   . April 10 :
     # Some items of the experimental part in the HTML structure report are now in italic,
       in agreement with published articles.

   . March 10 :
     # WRITE_DEVICE keyword
     # WRITE_HKL keyword has been replaced by FIND_HKL_LIST.
       The SUPPRESS/REMOVE argument for FIND_HKL_LIST keyword
       has been added, leading to the creation of a new file free of
       data obeying the current selection rule.
     # QVEC components can be input as fractionnal values.
       The following fractionnal absolute values are :
       1/2, 1/3, 2/3, 1/4, 3/4, 1/5, 2/5, 3/5, 4/5, 1/6, 5/6,
       1/7, 2/7, 3/7, 4/7, 5/7, 6/7, 1/8, 3/8, 5/8, 7/8,
       1/9, 2/9, 4/9, 5/9, 7/9 and 8/9
     # GEN_HKL keyword leads to a structure factor calculation if atoms
       has been input.
     # SF_HKL keyword leads to a structure factor calculation for
       a given hkl reflexion
     # New WRITE_BEAM and WRITE_QVEC keywords

   . Feb. 10:
     # CREATE_CEL keyword allows to create a .CEL file for PowderCELL
       after reading a CIF file.
     # CREATE_INS keyword allows to create a .INS file for SHELXL
       after reading a CIF file.
     # CREATE_CFL keyword allows to create a .CFL file for CRYSCAL
       after reading a CIF file.
     # New "[COMMAND LINE ARGUMENTS]" part in the setting file (cryscal.ini)
       with the following fields :
        . create_CEL
        . create_INS
        . create_CFL
       Putting the corresponding values to 1 will create .CEL, .INS and .CFL
       respectively.
     # cryscal file.p4p: if crystal faces are present in the .P4P file,
        they are extracted and saved in the import.cif.

   . Jan. 10:
     # Bug in _trans.HKL file has been corrected.

   . Nov. 09:
     # If a "platon_ortep.gif" file is present in the current folder, it is
       automatically incorporated in the HTML report file
     # If final.y file contains QVEC field and related parameters,
       a hklm file is created

   . Oct. 09:
     # If a hkl file is input, the transformed hkl file is
       loaded automatically after MATRIX keyword
     # Shannon table value for magnesium is corrected (Mg+2)
     # Cosmetic changes in the HTML documents (report and user's guide) created
       by CRYSCAL.
     # Space group number has been added in the HTML report
     # SHELX reference has been changed to :
       G. M. Sheldrick, Acta Cryst A, 2008, A64, 112-122

   . Sept. 09:
     # TWIN_PSEUDO_HEXA keyword
     # TWIN_HEXA keyword
     # Bugs in the routine to create the archive_cryscal.cif file has
       been corrected, specially when the archive.cif file is created
       from the "create CIF / ACTA-C" procedure in WinGX, where the
       order of some CIF fields is changed.
     # CRYSCAL has been compiled with new version of CFML (4.00)
     # Bugs in the connectivity calculation routine has been corrected

   . Feb. 09:
     # CHECK_GROUP can now determine trigonal space group
     # SG_ALL keyword output sub-groups of the current space group

   . Jan. 09:
     # .RAW file can be given as argument in the command line
       i.e. d:\> CRYSCAL my_file.RAW
       CRYSCAL is then reading my_file.RAW and will create a
       my_file_RAW.HKL file in a SHELX format. This file also contains
       dir. cos. for further absorption correction.
       Same behavior can be optained by associating a selected RAW file to
       CRYSCAL program in the Windows file folder

   . Nov. 08:
     # GEN_HKL accepts now Q_min and Q_max arguments
     # SEARCH_HKL arguments can be h, k or l letters.
       ex: SEARCH_HKL h 0 0
           SEARCH_HKL 1 k 0
     # SITE_INFO keyword gets constraints on anisotropic ADP, using the
       routine implemented in FullProf
     # new available arguments for CRYSCAL in command line:
       - LOG    : create a cryscal.log file
       - NO_OUT : no output information are written on screen

   . oct. 08:
     # CRYSCAL archive.cif : for archive.cif files created with the new version of
       WinGX (sept. 2008), CRYSCAL is skipping the whole part of the cif file
       containing programs references, to created the cryscal_archive.cif file

     # new argument for CRYSCAL in command line : CRYSCAL CREATE_INS/SIR_TO_INS
       Create job.ins file from :
         . output.RES file created by SIR programs
         . struct.cif file created by WinGX
       This job.ins can be directly used for structure refinement with
       SHELXL, and contains right cell parameters and esd's, Mo wavelength
       and useful instructions such as ACTA, BOND$H, CONF, TEMP ...

   . sept. 08:
     # CRYSCAL archive.cif : CRYSCAL is reading archive.cif and cryscal.cif
       files and creating completed archive_cryscal.cif file

     # keyword PAUSE: pause in th execution of the requested commands
       This keyword can be useful when comands are executed from a CFL
       commands file

   . july 08:
     # REPORT/REPORT_long: CIF fields can be independly in lower and
       upper cases


   . april 08:
     # CONN keyword: calculation of connectivity around a selected atom
       given as argument.

   . sept. 07:
     # SEARCH_SPGR keyword: search for a space group, given a hkl list and
       a given crystal system (Thanks to JRC for the CHECK_GROUP routine)

   . july 07:
     # MATMUL keyword for 3*3 matrix multiplication
     # CIF file can be given as a second argument if "REPORT" or "REPORT_long"
       is given at first. A CIF_file_structural_report.HTML is then created
       ex: d:\cryscal report_long my_CIF_file.CIF
     # P4P file can be given as argument in the command line to run CRYSCAL,
       i.e. CRYSCAL my_file.P4P.
       CRYSCAL is then reading my_file.P4P and my_file.HKL to create
       import.CIF file for WinGX
       Same behavior can be optained by associating a selected P4P file to
       CRYSCAL program in the Windows file folder

   . april 07:
     # MERGE keyword: merge equivalent reflections of the current HKL file

     # REPORT keyword can be interpreted in command line:
       \> cryscal report
       CRYSCAL is looking in the current folder for the presence of a
       "archive.cif" file: "structural_report.html" file is then created
       and contains text about the crystallographic study. The browser
       defined in the "cryscal.ini" file is then launch

   . march 07:
     # .x file (created by DENZO) and .rmat file (created by DIRAX) can be
       passed as argument for CELL keyword

   . feb. 07:
     # RESET keyword for input parameters and arrays initialization


  . jan. 07:
    # THERM keyword can performed conversion of anisotropic displacement parameters:
      new available arguments: U_ij, B_ij, Beta_ij
    # DIR keyword has been added and corresponds to the DIR DOS command.
      Arguments may follow this keyword.
    # Wcryscal for Windows has been created.

  . nov. 06:
    # X rays data for Ag, Fe and Cr have been tabulated
    # \> cryscal P4P:
       CRYSCAL is looking in the current folder, for a P4P file (created
       by SAINT) and a HKL file (created by SADABS). Import.cif file is then
       created and can be directly read by WinGX as a KappaCCD file

  . oct. 06:
    # MAG keyword:     output magnetic features for a 3d or 4f ion
    # SHANNON keyword: get effective ionic radii from Shannon article (Acta Cryst. 1976, A32, 751)
    # P4P keyword:     read P4P file created by SAINT (Bruker-AXS)

  . sept. 06:
    # FILE keyword: .m91 and .m95 files created by JANA can be read
    # CELL keyword: .m50 file can be read

   
  CRYSCAL news are stored in the CRYSCAL_news.txt file.
   
