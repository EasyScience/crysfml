   
      *****************************************************************
      *                                                               *
      *                         C R Y S C A L C                       *
      *                                                               *
      *                 (CRYSTALLOGRAPHIC CALCULATIONS)               *
      *                                                               *
      *               makes the crystallographer life easier !        *
      *                                                               *
      *                       Ver. February 2017                      *
      *                                                               *
      *---------------------------------------------------------------*
      *                                                               *
      *                           T. Roisnel                          *
      *                                                               *
      *                        CDIFX/PRATS/ISCR                       *
      *               UMR6226 CNRS-Univ. Rennes 1, France             *
      *                                                               *
      *             [with courtesy of JRC and JGP for CFML]           *
      *                                                               *
      *                                                               *
      *           contact  : thierry.roisnel@univ-rennes1.fr          *
      *          Web site : www.cdifx.univ-rennes1.fr/cryscalc        *
      *                                                               *
      *****************************************************************
   
   
     Main new features implemented in CRYSCALC:
     (for more details, see the CRYSCALC manual (MAN keyword))
   
     T. Roisnel / CDIFX - ISCR Rennes
   
   
   . Jan. 17 :
     # NEWS keyword can contain "EXPERT_ONLY" as argument to output only
       CRYSCALC news available only in expert mode.
     # "EULER_TO_KAPPA" routine has been corrected for Chi values
       larger than 180 : Chi is then transformed to 360. - Chi).
     # ABIN keyword allows to read and modify a .INS file by adding
       the ABIN SHELXL instruction (not included if .INS written
       by SXGRAPH interface of WinGX).
     # The CRYSCALC routine associated to STAR_K keyword has been changed to
       the "K_Star" routine of CFML.
       The previous routine can still be output using the TR argument
       for STAR_K (available only in expert mode)
     # PLANE keyword accept more than 3 atoms for the calculation
       of a mean plane equation.
     # Compilation of CRYSCALC with the latest version of CRYSFML
       (dec. 2016)
     # New CELL_ESD keyword: input of esd's for cell parameters and
       calculation of corresponding unit cell volume ESD.
     # New GET_TRANSF_MAT keyword provides the transformation matrix
       between two primitive unit cells (determinant of the matrix
       is equal to 1).
     # New REDUCE keyword provides conventional unit cell parameters
       and transformation matrix between input cell and conventional
       cell(s). The routine is based on Get_conventional_Unit_Cells
       program written by JRC using procedures implemented in CRYSFML.
   
   
   . Dec. 16 :
     # New WRITE_BONDS, WRITE_ANGLES, WRITE_TORSION_ANGLES, WRITE_HTAB
       keywords are available after a READ_CIF instruction.
       [only in EPERT mode]
     # When creating import.CIF from .P4P and .HKL files, scans features
       (type of scan, DX, exposition time, starting angles for theta, omega
       phi and chi motors) are extracted from .sfrm images.
   
   . Nov. 16 :
     # "WRITE_ATOMS cart" keyword leads to the creation of a cryscalc.xyz file
       for PyMOL (http://www.pymol.org/).
     # NO_DETAILS keyword will lead to a very short and restricted output.
       [only in EXPERT mode]
     # TOLMAN keyword: van der Waals radius for ligands can be given as
       arguments. If not specified, defaut values are coming from
       CRYSFML library, excepted for H atoms (r=1.2A).
       ex: TOLMAN CO1 P1 H1A H11A H21A 1.22 1.22 1.22
     # When creating import.CIF from .P4P and .HKL files, crystal to detector
       distance is now extracted from .sfrm files for every scan of the data
       collection.
     # New "NO_H" argument for CREATE_INS argument will exclude
       hydrogen atoms from the created .INS file.
     # New "NO_details" argument can be applied to most of the keywords,
       excepted WRITE* keyword. This action will lead to a very short
       and restricted output.
     # New REM keyword: non interpreted command. Can be useful
       to skip a command in a CFL input file. This keyword can
       be replaced by "!" or "#" character.
   
   . Oct. 16 :
     # New READ_HKLF5 keyword: read HKLF5 format data file containing
       structure factors of a twin crystal.
     # New REF_SHELX keyword: output references for SHELXL and SHELXT
       software.
     # If a .png/.jpg file corresponding to the crystal picture is present
       in the current folder (named as sample_ID.png/.jpg), it will be
       embedded in the final structural report.
     # New TOLMAN_ANGLE keyword: calculation of the Tolman cone angle
       as defined from crystallographic data and Van der Waals radii in
       "Transition Met. Chem. 20, 533 (1995)". The TOLMAN_ANGLE keyword
       has to be followed by the labelling of the 5 atoms defining the cone,
       corresponding to metal, centered atom and 3 ligand atoms respectively
   
   . Sept. 16 :
     # Cosmetic changes in the .HTML/.TXT/.PDF structural reports
     # Redundancy is now calculated and output during Rint calculation.
     # New "KAPPA_TO_EULER" AND "EULER_TO_KAPPA" keywords allow to convert
       motors angles values of single crystal diffractometer from Kappa to
       Eulerian geometry (and opposite)
   
   . July 16 :
     # .FAB file created by SHELXL201x is now embedded in the
       cryscalc_archive_hkl.cif file in the case of SQUEEZE
       procedure has been used.
     # Mean value of atomic volume for non H hydrogen atoms is now output after
       molecular density calculation for compounds containing H atoms.
   
   . June 16 :
     # New HKLF5 keyword: 9 arguments are necessary to input the 3*3
       transformation matrix components. Combined with FILE keyword,
       a hklf5 format data file is then created. Overlapping reflections
       criteria can be defined in the cryscalc.ini setting file through
       "ref_overlap_criteria=" keyword in the [OPTIONS] section. Defaut
       value is 0.15 and max. value has been fixed to 0.25
     # Corrections of minor bugs, specially when .CFL input file is read from
       option #2 in the main menu.
     # New EXTRACT command line argument: extract .res and .hkl files
       embedded in an archive .CIF file.
     # New features for SUPERCELL instruction:
        . cell parameters are updated
        . if space group of initial cell is know, space group is
          updated to P 1.
     # STAR_K keyword: the arms of the K star are now correct
       for primitive and centered space groups.
     # New "CONDENSED" argument for WRITE_SYM_OP keyword:
       output symmetry operators list in a condensed way.
   
   . May 16 :
     # New ONLY_X argument for CONN keyword : output connectivity
       between atoms of the same X species.
     # CONN keyword: MIN and MAX arguments are now taken into
       account correctly.
     # Correction of bug in the "STAR_K" keyword routine :
       The arms of the K star are now ouput for primitive
       space groups (not yet ouput for others).
     # new SAVE_SETTINGS keyword will save cryscalc.ini setting file
       in the current folder. This can be useful if no setting file
       is present in the CRYSCALC folder.
     # WRITE_CELL keyword: standart deviations of cell parameters
       and volume are ouput if they are known.
   
   . April 16 :
     # Results of Rint calculation was bugged for successive
       calculation without using RESET keyword. This is corrected.
     # New FCF_FILE keyword: read .fcf file create by SHELX
       IF "PLOT" is given as argument, a *_FCF.PGF file for WinPLOTR
       is created (Fc2=f(Fo2) curve)
       IF "PLOT_STL" is given as argument, a *_FCF_stl.PGF file
       is created (Fc2 - Fo2 = f(sinThetal/lambda) curve).
       If WinPLOTR is already installed, .PGF file is automatically
       displayed.
   
   . March 16 :
     # New features in the header of the import.cif file
       created from .P4P, .HKL and .ABS files coming from
       single crystal data reduction in APEX2 and APEX3
       (Bruker AXS software).
     # MONOCLINIC keyword : condensed output if "no_out" is
       given as argument.
   
   . February 16 :
     # New DIFF keyword : calculation of the components
       of the difference atomic coordinates vector
       between 2 input atoms
     # New PLANE keyword : calculation of the 4 components
       of the plane equation Ax+By+Cz+D=0, given three
       atoms coordinates.
     # New SEARCH_TETRA keyword : determine tetragonal axis
       from hkl data integrated in a pseudo-cubic
       unit cell by calculating successively internal R values
       for the most probable space group of following different
       setting: abc, cab, bca
   
   . January 16 :
     # New UPDATE/NO_UPDATE arguments for MAT keyword
     # New SUPERCELL input keyword: calculation of atomic coordinates
       in a superstructure cell.
     # _shelx_res_checksum and _shelx_hkl_checksum items are included
        in the archive.cif file for compatibility with PLATON Checkcif
        and cif files created by SHELXL-2014.
   
   . Dec. 15 :
     # Minor correction in the header of import.cif created from .P4P and .HKL files
   
   . Nov. 15 :
     # DIST keyword : "_*" option after second label allows to calculate
       interatomic distance between first input atome and the closest
       equivalent second atom (space group has of course to be known).
       example : DIST Mo1 Mo2_*
   
   . Oct. 15 :
     # HKL_diff keyword : calculation of F2 difference for common reflections of 2
                          hkl files.
     # UPDATE keyword : download the lastest version of CRYSCALC from the web site
                        (www.cdifx.univ.rennes1.fr/progs/cryscalc/cryscalc.exe
       Remark: Browser has to defined in the setting file.
     # Minor cosmetic changes in import.cif
   
   . Sept. 15 :
     # Polar character of space group has been corrected : point group
       has to be one of the following :
       1, 2, 3, 4, 6, mm2, m2m, 2mm, 3m, 3m1, 31m, 4mm, 6mm
     # "include_experimenter" field can be input in the cryscalc.ini setting file :
       experimenter features, coming from [AUTHOR] section, are then included
       in the archive_cryscalc.cif file.
     # import.cif file created from .P4P and .HKL files contains the number of scans
       of the data collection and related features (exposition time, frames width,
       number of frames)
     # NIGGLI ouput: Niggli matrix is now output
   
   . July 15 :
     # THERM ouput: some calculation outputs were wrong in the case of
                    "matrix U non-positive definite".
   
   . June 15 :
     # SEARCH_EXTI keyword can have a string optional argument : if "ALL"
       is given as argument, all reflections are considered, without applying
       any criteria.
     # A small bug has been corrected in the SEARCH_GROUP routine. It appeared
       only when searching from only centered space groups and the symmetry
       was unknown in the import.cif input file.
     # Two logos for the structural_report.pdf can be specified in the
       [OPTIONS] section of the setting file. These .jpg files will be used
       included in the structural report (Latex and pdf formats). They
       have first to be present in the \img folder of the CRYSCALC directory.
       ex:
         report_logo_1   = CDIFX_logo.jpg
         report_logo_2   = ISCR_logo.jpg
   
   . May 15 :
     # new SEARCH_MONO keyword : determine monoclinic angle
       from hkl data integrated with a pseudo-orthorhombic
       unit cell by calculating successively internal R values
       for "P 2 1 1", "P 1 2 1" and "P 1 1 2" space groups.
     # CONN output: polyedron distorsion is calculated as:
       distorsion = SUM((dist-dist_av)/dist_av)**2) / n
       with n: number of ligands
            dist_av: average distance
     # Minor changes for D8 Venture data file
   
   . April 15 :
     # New DETAILS argument for WRITE_ADP keyword
   
   . March 15 :
     # New CREATE_PCR keyword : create .PCR input file
       for FullProf (pattern simulation). Structural data
       have to be previously input through for example
       READ_CIF or READ_INS keywords. In such a case,
       profile features can be specified in the setting file
       ([PATTERN SIMULATION (Pseudo-Voigt profile)] section).
     # "create_pcr=1" can be spectified in the [COMMAND LINE ARGUMENTS]
       section of the setting file to create automatic PCR file
       from command line run of CRYSCALC
   
   . Feb. 15 :
     # New arguments for SEARCH_GROUP keyword :
       . P  : provide only primitive space groups
       . ALL: provide primitive and centered space groups
       . CENTERED/NOT_P: provide only centered space groups
     # CIF files created by SHELXL2014 are correctly read (changes in
       in CRYSFML to read new CIF strings as :
        . _space_group_name_H-M_alt
        . _space_group_symop_operation_xyz
        . _space_group_crystal_system
     # Parameters for D8 Venture diffractometer (Bruker AXS) has been included and
       can be accessed from setting file in [DEVICE] section through :
       "diffractometer = D8_VENTURE_Cu"  or "diffractometer = D8V_Cu"
       "diffractometer = D8_VENTURE_Mo"  or "diffractometer = D8V_Mo"
       for Cu and Mo radiations respectively.
     # Flack parameter is now provided in HTML and TXT reports.
   
   . Dec. 14 :
     # Archive.cif command line argument can be followed by "NO_HKL",
       allowing to exclude HKL file in final archive, independently
       of the contain of cryscalc.ini setting file.
   
   . Nov. 14 :
     # New argument for DATA_neutrons keyword, allowing to provide
       to the user neutron scattering length versus energy for
       some rare earths and isotopes. The following arguments can be
       input: Sm_nat, SM_149, Eu_nat, Eu_151, Gd_nat, Gd_155, Gd_157,
       Dy_164, Er_nat, Er_167, Yb_nat, Yb_168, Yb_174 and Lu_176.
       Thanks to Pierric Lemoine (ISCR) for taping neutron scattering
       lengths from the following reference :
         Atomic data and nuclear data tables 44, 191-207 (1990)
         J.E. Lynn and P.A. Seeger, L.A.N.L.
     # New PAT command line argument after .CIF or . INS file
       allows to calculate a diffraction pattern from features given by
       PDP_BEAM/PDP_WAVE keywords and details in the [PATTERN SIMULATION]
       section of the setting file.
       Example: cryscalc job.cif PAT
   
   . Oct. 14 :
     # New [USER SHORTCUTS] section of the cryscalc.ini, defining
       some keywords shortcuts (max. = 10). The shortcut and its
       details (CRYSCALC keyword) has to be separated by "=" character.
       Example: RJC = READ_CIF job.cif
     # New parameters in [OPTIONS] section of the cryscalc.ini
       setting file. These parameters are used for simulation
       of powder diffraction file from command line and .CIF/.INS
       file (create_PAT_PRF=1)
        pdp_beam   = N    ! N for neutrons / X for X-rays
        pdp_wave   = 1.22 ! wavelength used for diffraction pattern
                           simulation
       If not specified, simulation pattern is calculated for
       X-rays and Copper K_alpha1 radiation (1.5406 A)
     # New command line argument:
       CREATE_ARCHIVE argument, followed by the name of CIF files
       (without extension), allows to create a whole archive.cif file.
       First cif file corresponds to the main CIF file created by
       refinement software and next ones to supplementary cif files
       to complete the archive.
       ex : d:\> CRYSCALC  CREATE_ARCHIVE my_job.cif import.cif
            . my_job.cif : main .CIF file, used to extract structural
                           parameters
            . import.cif : secondary .CIF file, containing experimental
                           parameters (crystal and experimental features, ...)
   
   . Sept. 14 :
     # new CREATE_SOLVE keyword:
       . create input files for structure solving software as SIR97,
         SHELXS/T and SUPERFLIP.
     # bugs corrections:
       . site multiplicity calculation
       . CRYSCALC reports (html, txt, latex): adp are in A^2
         and not in A^2x10^3 !
     # Some statistics on F2_mean, sig_mean ... have been added in the
        output of the FILE keyword.
   
   . July 14 :
     # "include_HKL_file" field can be input in the cryscalc.ini setting file to
       embed the contain of hkl SHEXL file in the archive_cryscalc.cif file.
       The SHELXL hkl file name corresponds to the last project ID in WinGX.
     # TO AVOID CONFUSION, CRYSCAL PROGRAM HAS BEEN RENAMED AS
       CRYSCALC. FEATURES OF THE SOFTWARE HAVE TO BE CHANGED
       CONSEQUENTLY :
        . environnement variable : CRYSCALC
        . setting file : CRYSCALC.ini
        . css files : CRYSCALC.css and CRYSCAL_report.css
       CRYSCALC will be included in the distribution of the FullProf Suite
       in a near future.
   
   . June 14 :
     # New argument for CONN keyword:
        . NO_xx : exclude xx atoms type from listing
          ex ! CONN Cu1 NO_H
     # "create_PAT_PRF" field has been added in the "[COMMAND LINE ARGUMENTS]"
       part in the setting file (cryscalc.ini) : X-ray diffraction pattern
       is then created (PRF file FullProf format) after reading a CIF file.
   
   . May 14 :
     # Corrections of bugs caused by the new CRYSFML library
       specially in bond distribution routine
     # New arguments for CONN keyword:
        . ANG : interatomic angle calculation
        . CONDENSED : short output
   
   . March 14 :
     # ALL_X argument for CONN keyword:
       output atomic connectivity for all atoms
       of the X species.
       ex: CONN ALL_Cu
     # in_A argument for WRITE_ATOMS keyword:
       Atomic coordinates are listes in A
     # VOL argument for CONN keyword:
       polyedron volume calculation, based on VOLCAL program
       of L. W. FINGER, included in CFML
   
   . Feb 14 :
     # BARY keyword:
       Centroid calculation can be applied with only 2 input atoms
     # Bug has been corrected in the HTML report combined with
       SQUEEZE option.
   
   . Nov 13 :
     # STAR_K keyword:
       Apply rotational parts of the symmetry operators of a given
       space group on the components of a propagation wave vector.
   
   . Oct 13 :
     # CONN keyword:
       . new argument for GEN_HKL keyword : PM2K
         PM2K_hkl.inp is created : its contains hkl reflections list
         to be copied in the input file for PM2K program (M. Leoni).
       . new MIN= and MAX= arguments (default values are defined
         in cryscalc.ini setting file ([PARAMETERS] section)
       . calculation of effective interatomic distances
   
   . Sept 13 :
     # new SELF argument for CONN keyword: output interatomic
       distance only between atoms with same labels.
       This can be useful for M-M distances in a organometallic complex.
     # New READ_FACES keyword : read crystal habitus .
       ex. : READ_FACES absorb.ins
       ex. : READ_FACES faces.Def
   
   
   . July 13 :
     # New DHA keyword : calculation of H position given donor and
       acceptor atoms.
     # Change in MENDEL argument that can be atomic number.:
       ex: MENDEL 59
   
   . May 13 :
     # READ_INS keyword: by default, Q peaks are not read.
       Q_PEAKS argument has to be specified for not skipping Q peaks
   
   . April 13 :
     # new arguments for CREATE_FST keyword:
       MOLE : space group line is commented to draw
       only atoms of the asymmetric unit cell
       No_H : Hydrogen atoms and related bonds are excluded from the
              drawing (lines are commented).
       No_H argument is valid only with MOLE argument
       POLY : includes polyedra drawing in Fp_Studio if connectivity
              calculations have been performed
       RUN  : launch FP_Studio
     # argument "CART" after the "WRITE_ATOMS" keyword outputs the
       cartesian coordinates of the atoms. Cartesian frame type can
       be specified by "CART_A" (x//a) and "CART_C" (x//c).
     # argument "SHAPE" after the "CONN" keyword creates an input
       for SHAPE programm (http://www.ee.ub.es/)
       derivative SHAPE arguments : SHAPE_A (a//x), SHAPE_C (x//c)
     # Cartesian frame type (A: x//a or C: x//c) can be specified in the
       setting file, through the "cartesian_frame_type" keyword in the
       [OPTIONS] section. Default value for the cartesian frame is A (x//a)
     # argument "CART" after the "WRITE_CELL" keyword outputs the
       cartesian frame, metric tensors and Busing-Levy B-matrix. Cartesian
       frame type can be specified by "CART_A" (x//a) and "CART_C" (x//c).
       argument.
     # DEBUG, DEBUG_2 and DEBUG_3 keywords : access to debug modes and create
       cryscalc_debug.txt file. In level_2 debug mode, this file contains
       the name of main called routines. In level_3 mode, this file
       contains more explanations.
       [only in EXPERT mode]
   
   . March 13 :
     # New keywords related to TIDY software (standardisation of inorganic
       crystal-structure data (Acta Cryst. 1984, A40, 169-183):
       - CREATE_TIDY   : create input file for TIDY from a .CIF or .INS file
       - READ_TIDY_out : read output file from TIDY (default name = stidy.out)
   
   . Feb. 13 :
     # CONN keyword can have BVS argument for Bond Valence Sum Calculation.
       Oxidation state of the input atoms have to be provided trough the
       ATOM keyword.
       ex: ATOM Fe1 Fe+3 0.11 0.22 0.33 0.4 1.
       example of CFL file :
         http:\\www.cdifx.univ-rennes1.fr\cryscalc\cryscalc_y2o3_bvs.cfl
     # Final.y file (coming from EVALCCD) are not read anymore, since they
       don't contain structure factors.
     # Connectivity calculation outputs symmetry operators used to generate
       atoms around a particular one. CFML has been modified to output this list.
     # Profile (U, V, W, eta0, eta1) and pattern (step, constant background,
       scale factor) parameters can be specified in the [PATTERN SIMULATION]
       section of the cryscalc.ini setting file, for X-ray and neutron pattern
       calculation.
   
   . Jan. 13 :
     # When creating archive_cryscal.cif file, CRYSCALC is looking for
       output files creating by different versions of SQUEEZE procedure
       in PLATON, as platon.sqf or platon_sqr.sqf (PLATON jan. 2013)
     # New argument for GEN_HKL for powder diffraction pattern calculation :
       particle size (in A) can be specified through the "SIZE=" keyword.
       If not, particle size is considered as infinite and
       no line broadening is calculated.
       Example : GEN_HKl 2theta_min=20 2theta_max=120 PAT SIZE=250
       Example of CFL file :
         http:\\www.cdifx.univ-rennes1.fr\cryscalc\cryscalc_si_x_100.cfl
     # Import.cif file can be created from .P4P file and .RAW file (output of
       SAINT program). This has to be specified in the command line through
       the "RAW=" keyword.
        Example:
         d:\data\CRYSCALC file_0m.P4P RAW=file_0m.RAW
     # New "DIST_X" and "DIST_PLUS" keywords allow to calculate the coordinates
       of a particular point aligned with with the input atoms
   
   . Dec. 12 :
     # New "FRIEDEL" keyword allows to get number pairs of Friedel
       in hkl file
   
   . Nov. 12 :
     # Particular format for .hkl file (h,k,l F2, sig) can be specified
       in the setting file in the [OPTIONS] section through the
       hkl_format keyword.
       example hkl_format = 3i4,2F15.2
       If not specified, default format is : 3I4,2F8.2 (SHELX format)
     # new argument for WRITE_SYMM keyword : if argument="SHELX"
       the list of symmetry operators is output in a SHELX format
     # news arguments for SITE_INFO keyword :
        . if argument="PCR", the list of symetry equivalent atoms
          is output in a FullProf format (.PCR)
        . if argument="PCR_MAG", the list of magnetic atoms
          is output in a FullProf format (.PCR)
   
   . Oct. 12 :
     # "CIF file for Pymol can be created by putting "PYMOL" as
       argument of "READ_CIF", "READ_INS" and "READ_CEL"
       keywords (example: FILE file.cif pymol) or in the command line
       with a cif.file (example: d:\cryscalc file.cif pymol
       "create_CIF_PYMOL" keyword (value = 0/1) can also be specified
       in the cryscalc.ini setting file : file_pml.cif file is then
       automatically created after reading a CIF file.
     # "Skip_start_menu" keyword (value = 0/1) can be input in the cryscalc.ini
       setting file to skip the starting main menu of CRYSCALC.
     # HTML structural report: torsion angles values greater
       than CIF_torsion_limit are excluded. Default value
       for CIF_torsion_limit is 170.0 but can be defined in the
       cryscalc.ini setting file in the [OPTIONS] section
     # Special format can be specified with the FILE keyword
      when reading .hkl file, with the FMT argument.
       Example : FILE filename.hkl fmt=3I4,2F15.2
   
   . Sept 12 :
     # new argument for BARY keyword
     # "HKL_statistics" keyword (value = 0/1) can be input in the cryscalc.ini
       setting file to output or not statistics on hkl reflections.
     # Export mode can be specified in the setting file through the expert_mode
       string in the setting file. If active, this mode allows to enter new
       specific keywords. This mode can also be activated through the
       "EXPERT_MODE" keyword and put OFF with "USER_mode" keyword.
       Examples:
        FIC   : "FILE import.cif"
        ST25  : "SHELL THETA 2.5 25"
       MAN_EXPERT keyword has been added to output the list of instructions in
       this expert mode.
       The list of expert mode keywords can be output through the "MAN_EXPERT"
       keyword if this kind of mode is activated.
       [only in EXPERT mode]
   
   . July 12 :
     # FILE keyword: .COL file created by COLL5 (ILL / format =4)
                      can be read
     # FILE keyword: .INT file created by DATARED can be read
     # CELL keyword: .RED file for DATARED can be read
     # REPORT_LATEX argument can be specified when launching CRYSCALC
       for the command line. In such a case:
       . structural_report.ltx file is created, in a LATEX format
       . pdflatex is launched to create a .pdf file.
         If a .GIF file is present in the current folder for crystal
         structure visualisation, it is first converted in .png file
         to be included in the final pdf document.
       [only in EXPERT mode]
     # New OUT_n argument for FILE keyword, allowing to output every
       n reflection features (index, h,k,l,F2,sig)
   
   . June 12 :
     # SHIFT_2TH keyword can now be followed by three values,
       corresponding to a constant, cos and sin dependent shifts
       respectively.
     # css files for structural HTML report and user's guide
       are now available in the CRYSCALC folder (repertory that
       contains the crycsalc.ini setting file. If present, these
       css files, called cryscalc_report.css and cryscalc.css
       for report and user's guide respectively, can be edited
       and modified by the user. These css files contains
       styles that are used in the HTML documents.
   
   . April 12 :
     # MOVE/TRANSLATE keyword accepts 4 arguments, as the MOVE
       instruction on SHELXL. Optional 4th argument corresponds to
       the sign to multiply atomic coordinates. New atomic
       are then : sign*x + t_x, sign*y + t_z, sign*z + t_z
       If input 3 arguments are given, they correspond to the
       t_x, t_y and t_z translation and the 4th argument is
       taken equal to +1.
   
   . March 12 :
     # GET argument can be input with SEARCH_GROUP keyword:
       the most probable space group is then considered
     # Cell parameters are deduced from UB matrix when P4P file or
       import.cif file contain this information. Use WRITE_CELL
       keyword to output these cell parameters.
   
   . January 12 :
     # CRYSCALC has been compiled with the new CRYSFML library
     # MOVE instruction for SHELXL (output of SG_INFO for acentric
       space group) is now correct for non conventional settings
   
   . December 11 :
     # Some minor changes have been performed in the code to be compiled
       with Intel Fortran Compiler
     # HKL arrays are now dimensionned dynamically. Default dimension is
       500000 but can be defined by user in the setting file though the
       "hkl_reflections" keyword in the [ARRAYS DIMENSIONS] section.
     # "LOCK_wave_value" field can be input in the cryscalc.ini setting file to
       to define the lock the input wavelength to the value of the closer
       Xray target (Cu, Mo ...). if not present in the setting file, the default
       value for this field is 0.02.
       Examples :
       - input wavelength = 1.53 and LOCK_wave_value = 0.02  : wl = 1.5406
       - input wavelength = 1.53 and LOCK_wave_value = 0.005 : wl = 1.53
   
   . November 11 :
     # Minor corrections in the HTML report in the "symmetry transformations
       used to generate equivalent atoms" parts (distances, angles, torsion
       angles and hydrogen bonds)
     # LST_SG keyword :
       - "chiral" and "polar" arguments can se specified to output
         chiral and polar space groups respectively
     # SG_INFO keyword outputs the MOVE instruction for SHELXL
       in the case of acentric space groups.
     # CRYSCALC has been compiled with last version of CFML (5.00)
      and changes in the space_group routine have been made to be
      to be in agreement with the CFML library.
   
   
   . October 11 :
     # LST_SG keyword :
       - "enantio" argument can se specified to output
         enantiomorphic space goups
       - Point group is output
     # MU keyword : explicit keyword to perform absorption coefficient
       calculation. Cell paramaters, wave and cell content has to be
       known. This keyword can be useful after reading of parameters
       from an external file as CIF or INS file.
       ex : READ_CIF UAl2.cif
            WAVE X_cu
            MU
   
     # DIAG keyword : diagonalization of a 3*3 matrix and ouput Eigen values
                      and Eigen vectors
     # THERM_SHELX keyword : ADP parameters are input in the following
       SHELX order, i.e. 11 22 33 23 13 12
   
   
   . July 11 :
     # Up to 5 extra matrices can be provided by the user in the cryscalc.ini
       setting file in the [USER TRANSFORMATION MATRICES] section. These
       matrices are defined through the "MAT_n" keyword followed by the 9
       components of the matrix m11 m12 m13 m21 m22 m23 m31 m32 m33 .
       and a comment text.
       New "USER_MAT" keyword has been added to select a particular matrix
       provided by the user in the cryscalc.ini setting file.
       The matrix to be selected can be input either by the numor preceded by
       the "# symbol, either the comment text preceded by the "$" symbol
       Examples : USER_MAT #1
                  USER_MAT $2a
     # "include_RES_file" field can be input in the cryscalc.ini setting file to
       embed the contain of last .res SHELXL file in the archive_cryscalc.cif file
       to avoid PLAT005_ALERT_5G alert in the CHECK CIF procedure. The SHELXL
       .res file name corresponds to the last project ID in WinGX.
     # After a matrix transformation of atomic coordinates, the list of atoms
       is updated with new coordinates.
     # Search_group procedure outputs only space groups those Bravais lattice
       corresponds to the Bravais lattice contained in the import.cif file
     # Include "_symmetry_space_group_name_H-M" string in the import.cif file
       created from .P4P and .HKL file
   
   . June 11 :
     # CRYSCALC has been compiled with new version of CFML (5.00)
   
   . May 11 :
     # Bug has been corrected in the structure factor calculation routine
     # Total number of electrons is output after CHEM keyword.
     # The matrix used for the hexagonal to rhomboedral system was corrupted.
   
   . April 11 :
     # Some changes in the routine to get new space group after matrix
       transformation
     # Some changes in the monoclinic transformation matrix list
     # A non systematic bug in the bonds distribution list (CONN keyword)
       has been corrected
   
   . Feb. 11 :
     # Stucture factors calculation can be performed for electrons
       diffraction (GEN_HKL and SF_HKL routines). This has to be
       specified by the BEAM keyword and "ELECTRONS" argument
     # Some examples of CFL input files can be downloaded from the
       CRYSCAL web site (www.cdifx.univ-rennes1.fr/cryscalc)
     # Some changes in output files :
        . cryscalc.log is renamed cryscalc_debug.txt
        . cryscalc.out is renamed cryscalc.log
       LOG argument has been replaced by DEBUG argument
     # New PAT argument for GEN_HKL keyword allows to generate a
       diffraction pattern. PRF file is automatically plotted
       with the WinPLOTR program if installed.
     # I/Imax is now calculated in the GEN_HKL routine when working
       in the 2theta space and neutron or Cu_K_alpha1 X-ray radiation.
       Intensity is calculated as follows:
                        I=mult * Lp * F^2
       where : mult is the multicicity of the reflection
               Lp the Lorentz-polarization factor, calculated by:
               Lp=(1-K+K*CTHM*cos2(2theta)/(2sin2(theta)cos(theta)
                CTHM=cos2(2theta_monok) [CTHM=0.79]
                K=0.  for neutrons
                K=0.5 for unpolarized X-ray radiation
     # Cosmetic changes in the Fortran codes to allow the compilation
       with the free G95 Fortran compiler.
   
   . Jan. 11 :
     # CREATE_FST keyword allows to create a .FST file for
       FullProf Studio after reading a CIF file.
     # "create_FST" field can be input in the "[COMMAND LINE ARGUMENTS]" part
       in the setting file (cryscalc.ini)
   
   . Dec. 10 :
     # New extinction rules for FIND_HKL_LIST keyword:
       . hhl with h+l=2n
       . hkk with k+h=2n
       . hkh with h+k=2n
     # Cosmetic changes in archive_cryscalc.cif file: in the case
       of samples without H atoms, "_atom_sites_solution_hydrogens" and
       "_refine_ls_hydrogen_treatment" cif field lines are removed
   
   . Nov. 10 :
     # Connectivity calculations are followed by a bonds distribution list
     # Transformation matrix components can be input as fractional values
        Example : matrix 1/2 1/2 0.   -1/2 1/2 0. 0. 0. 1
     # Cosmetic changes in HTML structural report
   
   . Oct. 10 :
     # A threshold value can be given as argument to the SEARCH_GROUP keyword
   
   . Sept. 10 :
     # FIND_HKL_list argument value can be negative and allows to search
       reflections with opposite rule than for positive value.
     # SIR_TO_INS command line argument has been replaced by SOLVE_TO_INS
       and allows now to create INS file for SHELXL from SHELXS ouput file
       as well as SIRxx output file.)
     # CREATE_ACE keyword allows to create a .ACE file for CaRIne
       after reading a CIF file.
     # "create_CEL" field has been added in the "[COMMAND LINE ARGUMENTS]" part
       in the setting file (cryscalc.ini)
     # NIGGLI/NIGGLI_CELL keyword has been added and allows to determine
       the Niggli cell from any triclinic cell
     # [CREATE INS] section has been added in the cryscalc.ini setting file to
       define temperature and thermal parameter threshold to skip atoms
       This avoids to enter these values related to the CREATE_INS keyword
   
   . June 10 :
     # Bugs in the FIND_HKL_LIST routine has been corrected
   
   . April 10 :
     # Some items of the experimental part in the HTML structure report are now
       in italic in agreement with published articles.
   
   . March 10 :
     # WRITE_DEVICE keyword
     # WRITE_HKL keyword has been replaced by FIND_HKL_LIST.
       The SUPPRESS/REMOVE argument for FIND_HKL_LIST keyword
       has been added, leading to the creation of a new file free of
       data obeying the current selection rule.
     # QVEC components can be input as fractionnal values.
       The following fractionnal absolute values are :
       1/2, 1/3, 2/3, 1/4, 3/4, 1/5, 2/5, 3/5, 4/5, 1/6, 5/6,
       1/7, 2/7, 3/7, 4/7, 5/7, 6/7, 1/8, 3/8, 5/8, 7/8,
       1/9, 2/9, 4/9, 5/9, 7/9 and 8/9
     # GEN_HKL keyword leads to a structure factor calculation if atoms
       has been input.
     # SF_HKL keyword leads to a structure factor calculation for
       a given hkl reflection
     # New WRITE_BEAM and WRITE_QVEC keywords
   
   . Feb. 10:
     # CREATE_CEL keyword allows to create a .CEL file for PowderCELL
       after reading a CIF file.
     # CREATE_INS keyword allows to create a .INS file for SHELXL
       after reading a CIF file.
     # CREATE_CFL keyword allows to create a .CFL file for CRYSCALC
       after reading a CIF file.
     # New "[COMMAND LINE ARGUMENTS]" part in the setting file (cryscalc.ini)
       with the following fields :
        . create_CEL
        . create_INS
        . create_CFL
       Putting the corresponding values to 1 will create .CEL, .INS and .CFL
       respectively.
     # cryscalc file.p4p: if crystal faces are present in the .P4P file,
        they are extracted and saved in the import.cif.
   
   . Jan. 10:
     # Bug in _trans.HKL file has been corrected.
   
   . Nov. 09:
     # If a "platon_ortep.gif" file is present in the current folder, it is
       automatically incorporated in the HTML report file
     # If final.y file contains QVEC field and related parameters,
       a hklm file is created
   
   . Oct. 09:
     # If a hkl file is input, the transformed hkl file is
       loaded automatically after MATRIX keyword
     # Shannon table value for magnesium is corrected (Mg+2)
     # Cosmetic changes in the HTML documents (report and user's guide) created
       by CRYSCALC.
     # Space group number has been added in the HTML report
     # SHELX reference has been changed to :
       G. M. Sheldrick, Acta Cryst A, 2008, A64, 112-122
   
   . Sept. 09:
     # TWIN_PSEUDO_HEXA keyword
     # TWIN_HEXA keyword
     # Bugs in the routine to create the archive_cryscalc.cif file has
       been corrected, specially when the archive.cif file is created
       from the "create CIF / ACTA-C" procedure in WinGX, where the
       order of some CIF fields is changed.
     # CRYSCALC has been compiled with new version of CFML (4.00)
     # Bugs in the connectivity calculation routine has been corrected
   
   . Feb. 09:
     # CHECK_GROUP can now determine trigonal space group
     # SG_ALL keyword output sub-groups of the current space group
   
   . Jan. 09:
     # .RAW file can be given as argument in the command line
       i.e. d:\> CRYSCALC my_file.RAW
       CRYSCALC is then reading my_file.RAW and will create a
       my_file_RAW.HKL file in a SHELX format. This file also contains
       dir. cos. for further absorption correction.
       Same behavior can be optained by associating a selected RAW file to
       CRYSCALC program in the Windows file folder
   
   . Nov. 08:
     # GEN_HKL accepts now Q_min and Q_max arguments
     # SEARCH_HKL arguments can be h, k or l letters.
       ex: SEARCH_HKL h 0 0
           SEARCH_HKL 1 k 0
     # SITE_INFO keyword gets constraints on anisotropic ADP, using the
       routine implemented in FullProf
     # new available arguments for CRYSCALC in command line:
       - LOG    : create a cryscalc.log file
       - NO_OUT : no output information are written on screen
   
   . oct. 08:
     # CRYSCALC archive.cif : for archive.cif files created with the new version of
       WinGX (sept. 2008), CRYSCALC is skipping the whole part of the cif file
       containing programs references, to created the cryscal_archive.cif file
   
     # new argument for CRYSCALC in command line : CRYSCALC CREATE_INS/SIR_TO_INS
       Create job.ins file from :
         . output.RES file created by SIR programs
         . struct.cif file created by WinGX
       This job.ins can be directly used for structure refinement with
       SHELXL, and contains right cell parameters and esd's, Mo wavelength
       and useful instructions such as ACTA, BOND$H, CONF, TEMP ...
   
   . sept. 08:
     # CRYSCALC archive.cif : CRYSCALC is reading archive.cif and cryscalc.cif
       files and creating completed archive_cryscalc.cif file
   
     # keyword PAUSE: pause in the execution of the requested commands
       This keyword can be useful when commands are executed from a CFL
       commands file
   
   . july 08:
     # REPORT/REPORT_long: CIF fields can be independly in lower and
       upper cases
   
   
   . april 08:
     # CONN keyword: calculation of connectivity around a selected atom
       given as argument.
   
   . sept. 07:
     # SEARCH_SPGR keyword: search for a space group, given a hkl list and
       a given crystal system (Thanks to JRC for the CHECK_GROUP routine)
   
   . july 07:
     # MATMUL keyword for 3*3 matrix multiplication
     # CIF file can be given as a second argument if "REPORT" or "REPORT_long"
       is given at first. A CIF_file_structural_report.HTML is then created
       ex: d:\cryscalc report_long my_CIF_file.CIF
     # P4P file can be given as argument in the command line to run CRYSCALC,
       i.e. CRYSCALC my_file.P4P.
       CRYSCALC is then reading my_file.P4P and my_file.HKL to create
       import.CIF file for WinGX
       Same behavior can be optained by associating a selected P4P file to
       CRYSCALC program in the Windows file folder
   
   . april 07:
     # MERGE keyword: merge equivalent reflections of the current HKL file
   
     # REPORT keyword can be interpreted in command line:
       \> cryscalc report
       CRYSCALC is looking in the current folder for the presence of a
       "archive.cif" file: "structural_report.html" file is then created
       and contains text about the crystallographic study. The browser
       defined in the "cryscalc.ini" file is then launch
   
   . march 07:
     # .x file (created by DENZO) and .rmat file (created by DIRAX) can be
       passed as argument for CELL keyword
   
   . feb. 07:
     # RESET keyword for input parameters and arrays initialization
   
   
   . jan. 07:
     # THERM keyword can performed conversion of anisotropic displacement
       parameters:
       new available arguments: U_ij, B_ij, Beta_ij
     # DIR keyword has been added and corresponds to the DIR DOS command.
       Arguments may follow this keyword.
     # Wcryscalc for Windows has been created.
   
   . nov. 06:
     # X rays data for Ag, Fe and Cr have been tabulated
     # \> cryscalc P4P:
        CRYSCALC is looking in the current folder, for a P4P file (created
        by SAINT) and a HKL file (created by SADABS). Import.cif file is then
        created and can be directly read by WinGX as a KappaCCD file
   
   . oct. 06:
     # MAG keyword:     output magnetic features for a 3d or 4f ion
     # SHANNON keyword: get effective ionic radii from Shannon article
      (Acta Cryst. 1976, A32, 751)
     # P4P keyword:     read P4P file created by SAINT (Bruker-AXS)
   
   . sept. 06:
     # FILE keyword: .m91 and .m95 files created by JANA can be read
     # CELL keyword: .m50 file can be read
   
   
  CRYSCALC news are stored in the CRYSCALC_news.txt file.
   
